<!-- omit in toc -->
## 目次
- [キャッシュとは？](#キャッシュとは)
- [キャッシュの種類](#キャッシュの種類)
  - [プロキシキャッシュ](#プロキシキャッシュ)
  - [ブラウザキャッシュ（ローカルキャッシュ）](#ブラウザキャッシュローカルキャッシュ)
    - [Expire](#expire)
    - [Cache-Control](#cache-control)
  - [インメモリキャッシュ](#インメモリキャッシュ)
  - [ディスクキャッシュ](#ディスクキャッシュ)
- [キャッシュで利用するヘッダー](#キャッシュで利用するヘッダー)
- [ブラウザのキャッシュの仕様について](#ブラウザのキャッシュの仕様について)
- [キャッシュのexpiresについて](#キャッシュのexpiresについて)
- [キャッシュを利用しているサービス](#キャッシュを利用しているサービス)
- [メモ](#メモ)

## キャッシュとは？
なにかしら処理をした結果を保持しておき、その結果が必要になった場合に保持していた内容をレスポンスすることで不必要な処理を省くことができ、結果的にレスポンスを早くすることができる。  
例えばDBから値を取得してレスポンスする場合、SQLが時間のかかるものであった場合に結果をキャッシュ（保持しておく）ことで二回目からはSQLの実行を減らすことができる。  
一方、古い結果を保持し続けてしまうと新しい結果を取得できない状態になってしまうので、キャッシュする期間やキャッシュする内容は慎重に設計する必要がある。

## キャッシュの種類

### プロキシキャッシュ
### ブラウザキャッシュ（ローカルキャッシュ）
- Expire(強いキャッシュ)
- Cache-Control(強いキャッシュ)
- Last-Modified(弱いキャッシュ)
- ETag(弱いキャッシュ)

#### Expire
レスポンスヘッダーとして`Expire`ヘッダーに有効期限を指定することで有効期限が切れるまでは自動的にブラウザにキャッシュされたリソースを参照する。  
期限が切れるまではブラウザは一度リソースを取得するとマシン内部にキャッシュするため、一度有効になるとHTTPリクエストをサーバーに送信しなくなる。  
`Expires: Wed, 04 Aug 2021 13:50:37 GMT`

クライアントとサーバー間で時間設定が異なると、うまく設定されないケースがある。

#### Cache-Control
`CacheControl:maxage=600`  
`max-age=600`と指定しているので取得されてから600秒間はブラウザのマシン内にキャッシュされる。

ちなみにCache-ControlとExpireが両方設定されている場合はCache-Controlヘッダーを優先する。

- shared(public)
  - 1:nでキャッシュする。本来キャッシュできないものでもキャッシュ可能。
- private
  - 1:1でキャッシュする。本来キャッシュできないものでもキャッシュ可能。
**キャッシュさせたくない場合は、`no-store`を指定すること**


### インメモリキャッシュ

### ディスクキャッシュ

## キャッシュで利用するヘッダー

## ブラウザのキャッシュの仕様について

## キャッシュのexpiresについて

## キャッシュを利用しているサービス

## メモ
[HTTPヘッダチューニング Etag・Last-Modified](https://blog.redbox.ne.jp/http-header-tuning.html)